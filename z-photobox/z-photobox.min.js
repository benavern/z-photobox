/********************************************
		Z-phtobox by Benjamin Caradeuc
			http://caradeuc.info
	Meant to be used with jQuery or Zepto 
********************************************/
var zPhotobox={selector:null,isvisible:!1,gallery:[],currentInGallery:null,checkKey:function(o){o=o||window.event,zPhotobox.visible===!0&&("37"==o.keyCode?zPhotobox.goto(zPhotobox.currentInGallery-1):"39"==o.keyCode?zPhotobox.goto(zPhotobox.currentInGallery+1):"27"==o.keyCode&&zPhotobox.close())},insert:function(o){if(zPhotobox.close(),0===$("#z-photobox").size()){var t=$('<div id="z-photobox"/>'),e=$('<div id="z-photobox-shadow"/>'),h=$('<div id="z-photobox-controls"/>'),n=$('<div class="before"/>'),i=$('<div class="after"/>');h.append(n,i),$(e).on("click",function(){zPhotobox.close()}),$(n).on("click",function(){zPhotobox.goto(zPhotobox.currentInGallery-1)}),$(i).on("click",function(){zPhotobox.goto(zPhotobox.currentInGallery+1)}),$(t).on("click",function(){zPhotobox.goto(zPhotobox.currentInGallery+1)}),$("body").append(e),$("body").append(t),$("body").append(h),$(document).on("keyup",zPhotobox.checkKey)}null!==o&&void 0!==o&&$("#z-photobox").append(o),$("#z-photobox").show(),$("#z-photobox-shadow").show(),$("#z-photobox-controls").show(),$("#z-photobox-controls div").show(),zPhotobox.currentInGallery<=0&&$("#z-photobox-controls .before").hide(),zPhotobox.currentInGallery>=zPhotobox.gallery.length-1&&$("#z-photobox-controls .after").hide(),zPhotobox.visible=!0},load:function(o){$(o.join(",")).on("click",function(t){for(var e=$(this).attr("class").split(" "),h=0;h<e.length;h++){var n="."+e[h];if(-1!=$.inArray(n,o)){zPhotobox.open(n,this);break}}t.preventDefault()})},open:function(o,t){zPhotobox.selector=o,zPhotobox.gallery=$(o).get(),zPhotobox.currentInGallery=void 0===t?0:zPhotobox.gallery.indexOf(t);var e=zPhotobox.gallery[zPhotobox.currentInGallery];zPhotobox.getImgSize(e.href,function(o,t){var h={w:o,h:t},n=h.h/h.w;h.h>$(window).height()-100||h.w>$(window).width()?(h.h>$(window).height()-100&&(h.h=$(window).height()-100,h.w=h.h/n),h.w>$(window).width()-20&&(h.w=$(window).width()-20,h.h=n*h.w)):h.h=n*h.w,zPhotobox.insert('<div class="z-photobox-img" style="width:'+h.w+"px; height:"+h.h+'px"><img src="'+e.href+'"></div>'),$("#z-photobox").css("top",$(window).height()/2-h.h/2-25+"px")})},getImgSize:function(o,t){var e=new Image,h=0,n=0;e.src=decodeURIComponent(o),e.onload=function(){h=e.naturalWidth,n=e.naturalHeight,t(h,n)}},"goto":function(o){o>=0&&o<zPhotobox.gallery.length&&(zPhotobox.currentInGallery=o,zPhotobox.open(zPhotobox.selector,zPhotobox.gallery[zPhotobox.currentInGallery]))},close:function(){zPhotobox.visible=!1,$("#z-photobox").hide(),$("#z-photobox-shadow").hide(),$("#z-photobox-controls").hide(),$("#z-photobox").empty()}};